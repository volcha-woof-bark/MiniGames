const words = [
  // (список слов без изменений)
  'дом', 'сад', 'кот', 'нос', 'лес', 'снег', 'день', 'ночь', 'глаз', 'рука',
  'нога', 'море', 'ветер', 'огонь', 'трава', 'песок', 'луна', 'звезда', 'солнце', 'дождь',
  'чай', 'хлеб', 'сыр', 'вода', 'сок', 'мясо', 'рыба', 'суп', 'чашка', 'ложка',
  'стол', 'стул', 'дверь', 'окно', 'стена', 'пол', 'крыша', 'сад', 'город', 'путь',
  'яблоко', 'апельсин', 'машина', 'автобус', 'поезд', 'корабль', 'самолёт', 'велосипед',
  'книга', 'тетрадь', 'ручка', 'карандаш', 'ластик', 'пенал', 'школа', 'учитель', 'ученик',
  'друг', 'подруга', 'мама', 'папа', 'брат', 'сестра', 'дядя', 'тётя', 'бабушка', 'дедушка',
  'цветок', 'дерево', 'листья', 'корень', 'ветка', 'птица', 'собака', 'кошка', 'лошадь', 'корова',
  'заяц', 'лиса', 'волк', 'медведь', 'тигр', 'лев', 'слон', 'жираф', 'обезьяна', 'попугай',
  'радуга', 'бабочка', 'божьякоровка', 'стрекоза', 'кузнечик', 'гусеница', 'паук', 'муравей',
  'черепаха', 'крокодил', 'дельфин', 'кит', 'акула', 'осьминог', 'морж', 'тюлень', 'белка',
  'ежевика', 'малина', 'вишня', 'груша', 'персик', 'абрикос', 'смородина', 'крыжовник',
  'огурец', 'помидор', 'картошка', 'морковка', 'капуста', 'свёкла', 'лук', 'чеснок',
  'молния', 'гром', 'туча', 'иней', 'роса', 'изморозь', 'сугроб', 'лужа', 'глазурь',
  'время', 'час', 'минута', 'секунда', 'год', 'век', 'жизнь', 'смерть', 'любовь', 'дружба',
  'счастье', 'горе', 'радость', 'печаль', 'страх', 'гнев', 'смех', 'слёзы', 'сон', 'мечта',
  'мысль', 'душа', 'сердце', 'разум', 'чувство', 'желание', 'надежда', 'вера', 'смысл', 'цель',
  'успех', 'неудача', 'труд', 'отдых', 'праздник', 'будни', 'погода', 'климат', 'страна', 'мир'
];

let currentWord = '';
let startTime = null;
let timerInterval = null;

const targetEl = document.getElementById('target-word');
const inputEl = document.getElementById('user-input');
const timerEl = document.getElementById('timer');

function updateTimer() {
  if (startTime) {
    const elapsed = (performance.now() - startTime) / 1000;
    timerEl.textContent = `Время: ${elapsed.toFixed(2)} с`;
  }
}

function newWord() {
  if (timerInterval) clearInterval(timerInterval);
  currentWord = words[Math.floor(Math.random() * words.length)];
  targetEl.textContent = currentWord;
  inputEl.value = '';
  inputEl.placeholder = 'Начни печатать...';
  
  // ✅ Разблокируем ввод
  inputEl.disabled = false;
  
  inputEl.focus();
  startTime = null;
  timerEl.textContent = 'Время: —';
}

inputEl.addEventListener('input', () => {
  // Если поле заблокировано — ничего не делаем
  if (inputEl.disabled) return;

  if (!startTime) {
    startTime = performance.now();
    timerInterval = setInterval(updateTimer, 10);
  }

  // ✅ Сравнение без учёта регистра
  if (inputEl.value.toLowerCase() === currentWord.toLowerCase()) {
    clearInterval(timerInterval);
    inputEl.placeholder = '✅ Отлично!';
    
    // ✅ Блокируем ввод до появления нового слова
    inputEl.disabled = true;
    
    setTimeout(newWord, 800);
  }
});

// Запуск
newWord();